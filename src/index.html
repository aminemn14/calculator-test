<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-gray-100 flex items-center justify-center h-screen">
    <div class="bg-white p-6 rounded shadow-md">
      <h1 class="text-xl mb-4">Calculator</h1>
      <div class="mb-4">
        <input
          id="num1"
          type="number"
          placeholder="Number 1"
          class="border p-2 rounded"
        />
        <input
          id="num2"
          type="number"
          placeholder="Number 2"
          class="border p-2 rounded ml-2"
        />
      </div>
      <div class="mb-4">
        <button data-operation="add" class="bg-blue-500 text-white p-2 rounded">
          +
        </button>
        <button
          data-operation="subtract"
          class="bg-blue-500 text-white p-2 rounded ml-2"
        >
          -
        </button>
        <button
          data-operation="multiply"
          class="bg-blue-500 text-white p-2 rounded ml-2"
        >
          *
        </button>
      </div>
      <div class="mb-4">
        <button id="clear-history" class="bg-red-500 text-white p-2 rounded">
          Clear History
        </button>
      </div>
      <div id="result" class="text-lg font-bold"></div>
      <div id="history" class="mt-4"></div>
    </div>

    <script>
      // Logique d'interface qui utilise la logique métier via une API simulée
      // Pour simplifier, intégration d'une version simplifiée de la logique métier.
      class CalculatorUI {
        constructor() {
          this.history = [];
        }
        add(a, b) {
          return a + b;
        }
        subtract(a, b) {
          return a - b;
        }
        multiply(a, b) {
          return a * b;
        }
        saveToHistory(a, operator, b, result) {
          const entry = { a, operator, b, result };
          this.history.push(entry);
          return entry;
        }
        clearHistory() {
          this.history = [];
        }
      }

      const calculator = new CalculatorUI();

      const num1Input = document.getElementById("num1");
      const num2Input = document.getElementById("num2");
      const resultDiv = document.getElementById("result");
      const historyDiv = document.getElementById("history");

      document.querySelectorAll("button[data-operation]").forEach((button) => {
        button.addEventListener("click", () => {
          const a = parseFloat(num1Input.value);
          const b = parseFloat(num2Input.value);
          const operation = button.getAttribute("data-operation");
          let res;
          if (operation === "add") {
            res = calculator.add(a, b);
            calculator.saveToHistory(a, "+", b, res);
          } else if (operation === "subtract") {
            res = calculator.subtract(a, b);
            calculator.saveToHistory(a, "-", b, res);
          } else if (operation === "multiply") {
            res = calculator.multiply(a, b);
            calculator.saveToHistory(a, "*", b, res);
          }
          resultDiv.textContent = `Result: ${res}`;
          renderHistory();
        });
      });

      document.getElementById("clear-history").addEventListener("click", () => {
        calculator.clearHistory();
        historyDiv.innerHTML = "";
      });

      function renderHistory() {
        historyDiv.innerHTML =
          '<h2 class="text-lg font-semibold">History:</h2>';
        calculator.history.forEach((entry) => {
          const div = document.createElement("div");
          div.textContent = `${entry.a} ${entry.operator} ${entry.b} = ${entry.result}`;
          historyDiv.appendChild(div);
        });
      }
    </script>
  </body>
</html>
